<!DOCTYPE html>
<html lang="sl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dodaj testne podatke - ShareIt</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; background: #f5f5f5; }
    .container { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    h1 { color: #333; }
    button { background: #007bff; color: white; border: none; padding: 15px 30px; font-size: 16px; border-radius: 5px; cursor: pointer; margin: 10px 0; width: 100%; }
    button:hover { background: #0056b3; }
    button:disabled { background: #ccc; cursor: not-allowed; }
    #status { margin-top: 20px; padding: 15px; border-radius: 5px; display: none; }
    .success { background: #d4edda; color: #155724; display: block; }
    .error { background: #f8d7da; color: #721c24; display: block; }
    .loading { background: #fff3cd; color: #856404; display: block; }
    .item { padding: 5px 0; color: #666; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Dodaj testne podatke</h1>
    <p>Klikni na gumb za dodajanje 10 testnih predmetov v Firebase Firestore.</p>
    <p><strong>Pomembno:</strong> 2 predmeta bosta v tvoji lasti.</p>

    <button id="addBtn" onclick="addTestData()">Dodaj testne podatke</button>

    <div id="status"></div>
  </div>

  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getFirestore, collection, addDoc, serverTimestamp, doc, setDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    const firebaseConfig = {
      apiKey: "AIzaSyDifZbIWJfqzVMIzR0-8dBR04SWSUvQy-k",
      authDomain: "shareit-75a13.firebaseapp.com",
      projectId: "shareit-75a13",
      storageBucket: "shareit-75a13.firebasestorage.app",
      messagingSenderId: "574476261534",
      appId: "1:574476261534:web:566f3aa94edf176fb9038f"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const myUid = "C9yImPDxydaqA5sxI1pyKbZwQ042";
    const otherUid1 = "demo-user-ana";
    const otherUid2 = "demo-user-marko";

    const users = [
      { uid: myUid, email: "chantal.pia02@gmail.com", name: "Chantal Pia", city: "Maribor" },
      { uid: otherUid1, email: "ana.kovac@example.com", name: "Ana Kovač", city: "Ljubljana" },
      { uid: otherUid2, email: "marko.novak@example.com", name: "Marko Novak", city: "Celje" },
    ];

    const testItems = [
      {
        title: "Električna žaga Bosch",
        description: "Profesionalna električna žaga, odlično stanje. Primerna za rezanje lesa.",
        category: "Orodje",
        pricePerDay: 15,
        city: "Ljubljana",
        location: { lat: 46.0569, lng: 14.5058 },
        images: ["https://images.unsplash.com/photo-1504148455328-c376907d081c?w=400"],
        status: "available",
        ownerUid: otherUid1,
      },
      {
        title: "Električni vrtalnik Makita",
        description: "Zmogljiv vrtalnik z baterijo. Vključeni dodatki.",
        category: "Orodje",
        pricePerDay: 10,
        city: "Ljubljana",
        location: { lat: 46.0511, lng: 14.5051 },
        images: ["https://images.unsplash.com/photo-1572981779307-38b8cabb2407?w=400"],
        status: "available",
        ownerUid: myUid,
      },
      {
        title: "Lestev 5m",
        description: "Aluminijasta lestev, nosilnost 150kg. Idealna za višja dela.",
        category: "Orodje",
        pricePerDay: 8,
        city: "Maribor",
        location: { lat: 46.5547, lng: 15.6459 },
        images: ["https://images.unsplash.com/photo-1581578731548-c64695cc6952?w=400"],
        status: "available",
        ownerUid: otherUid2,
      },
      {
        title: "Šotor za 4 osebe",
        description: "Družinski šotor, vodoodporen. Idealen za kampiranje.",
        category: "Šport",
        pricePerDay: 20,
        city: "Ljubljana",
        location: { lat: 46.0489, lng: 14.5065 },
        images: ["https://images.unsplash.com/photo-1478131143081-80f7f84ca84d?w=400"],
        status: "available",
        ownerUid: otherUid1,
      },
      {
        title: "Kolo za otroke (5-8 let)",
        description: "Modro otroško kolo z podpornimi kolesi. Zelo dobro ohranjeno.",
        category: "Šport",
        pricePerDay: 5,
        city: "Celje",
        location: { lat: 46.2396, lng: 15.2675 },
        images: ["https://images.unsplash.com/photo-1517649763962-0c623066013b?w=400"],
        status: "available",
        ownerUid: otherUid2,
      },
      {
        title: "Projektorski sistem",
        description: "Full HD projektor s platnom. Odličen za dogodke ali filme doma.",
        category: "Elektronika",
        pricePerDay: 30,
        city: "Ljubljana",
        location: { lat: 46.0568, lng: 14.5078 },
        images: ["https://images.unsplash.com/photo-1560109947-543149eceb16?w=400"],
        status: "available",
        ownerUid: otherUid1,
      },
      {
        title: "Profesionalna kamera Canon EOS",
        description: "DSLR kamera s objektivi 18-55mm in 50mm.",
        category: "Elektronika",
        pricePerDay: 40,
        city: "Maribor",
        location: { lat: 46.5577, lng: 15.6455 },
        images: ["https://images.unsplash.com/photo-1502920917128-1aa500764cbd?w=400"],
        status: "available",
        ownerUid: otherUid2,
      },
      {
        title: "KitchenAid mešalnik",
        description: "Planetarni mešalnik za peko. Moč 300W, več nastavkov.",
        category: "Kuhinja",
        pricePerDay: 12,
        city: "Kranj",
        location: { lat: 46.2389, lng: 14.3555 },
        images: ["https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=400"],
        status: "available",
        ownerUid: myUid,
      },
      {
        title: "Električni skiro Xiaomi",
        description: "Skiro s polnilcem, doseg do 20km.",
        category: "Elektronika",
        pricePerDay: 9,
        city: "Ljubljana",
        location: { lat: 46.051, lng: 14.506 },
        images: ["https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?w=400"],
        status: "available",
        ownerUid: otherUid1,
      },
      {
        title: "Vrtna kosilnica",
        description: "Bencinska kosilnica, primerna za srednje velike vrtove.",
        category: "Vrt",
        pricePerDay: 11,
        city: "Ptuj",
        location: { lat: 46.4199, lng: 15.8697 },
        images: ["https://images.unsplash.com/photo-1498654896293-37aacf113fd9?w=400"],
        status: "available",
        ownerUid: otherUid2,
      },
    ];

    window.addTestData = async function() {
      const btn = document.getElementById('addBtn');
      const status = document.getElementById('status');

      btn.disabled = true;
      status.className = 'loading';
      status.innerHTML = 'Dodajam testne podatke...';

      try {
        const itemsRef = collection(db, 'items');
        let html = '<strong>Uspešno dodanih:</strong><br>';

        for (const user of users) {
          await setDoc(doc(db, 'users', user.uid), {
            email: user.email,
            name: user.name,
            city: user.city,
            createdAt: serverTimestamp(),
          });
        }

        for (const item of testItems) {
          const docRef = await addDoc(itemsRef, {
            ...item,
            createdAt: serverTimestamp(),
          });
          html += `<div class="item">- ${item.title} (ID: ${docRef.id})</div>`;
        }

        status.className = 'success';
        status.innerHTML = html + '<br><strong>Predmeti so vidni v aplikaciji.</strong>';
      } catch (error) {
        console.error('Error:', error);
        status.className = 'error';
        status.innerHTML = `<strong>Napaka:</strong><br>${error.message}`;
        btn.disabled = false;
      }
    };
  </script>
</body>
</html>
